const truecallerjs = require("truecallerjs");

const truesearch = async (phoneNumber, installationId) => {
  const searchData = {
    number: phoneNumber,
    installationId: installationId,
  };

  try {
    const response = await truecallerjs.search(searchData);

    const jsonResponse = {
      name: response.getName(),
      alternateName: response.getAlternateName(),
      addresses: response.getAddresses(),
      email: response.getEmailId(),
      countryDetails: response.getCountryDetails(),
    };

    return jsonResponse;
  } catch (error) {
    
    throw new Error("Truecaller search error: " + error.message);
  }
};

module.exports = truesearch;

